
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Linux Dev. Environment &#8212; xNVMe v0.7.5 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css?v=70f28cd9" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=5dc08821"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial/devs/index';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://xnvme.io/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'v0.7.5';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Dynamically loading xNVMe" href="../dynamic_loading/index.html" />
    <link rel="prev" title="Flexible Data Placement" href="../fdp/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../_static/xnvme.svg" class="logo__image only-light" alt="xNVMe v0.7.5 documentation - Home"/>
    <script>document.write(`<img src="../../_static/xnvme.svg" class="logo__image only-dark" alt="xNVMe v0.7.5 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../toolchain/index.html">
    Toolchain
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../backends/index.html">
    Backends
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/index.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../material/index.html">
    Material
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributing/index.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../toolchain/index.html">
    Toolchain
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../backends/index.html">
    Backends
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/index.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../material/index.html">
    Material
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributing/index.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fdp/index.html">Flexible Data Placement</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Linux Dev. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dynamic_loading/index.html">Dynamically loading xNVMe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fabrics/index.html">NVMe-over-Fabrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bdev_xnvme/index.html">xNVMe in SPDK (<code class="docutils literal notranslate"><span class="pre">bdev_xnvme</span></code>)</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Linux Dev....</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="linux-dev-environment">
<span id="sec-tutorials-devs-linux"></span><h1>Linux Dev. Environment<a class="headerlink" href="#linux-dev-environment" title="Link to this heading">#</a></h1>
<p>This shows the manual steps of setting up a physical machine for <strong>xNVMe</strong> test
and development. This includes using devices attached to the machine, as well
as using the physical machine to setup virtual machines with advanced
NVMe-device emulation.</p>
<p>Advanced NVMe device emulation covers command-set enchancements such as
Flexible Data-Placement (FDP), Zoned Namespaces (ZNS), and Key-Value SSDs (KV).</p>
<p>The documentation is provided as a means to setup development environment with
minimal fuss and maximum foss :)</p>
<ul class="simple">
<li><p>xNVMe</p>
<ul>
<li><p>Built from source</p></li>
<li><p>Testing package</p></li>
</ul>
</li>
<li><p>CIJOE</p>
<ul>
<li><p>Scripts and utilities for development, testing, and maintenance</p></li>
</ul>
</li>
<li><p>Custom Qemu</p>
<ul>
<li><p>Built from source</p></li>
<li><p>Latest NVMe emulation features</p></li>
</ul>
</li>
<li><p>Custom Linux kernel</p>
<ul>
<li><p>Built from source</p></li>
<li><p>Installed via <code class="docutils literal notranslate"><span class="pre">.deb</span></code></p></li>
</ul>
</li>
</ul>
<section id="physical-machine">
<span id="sec-tutorials-devs-linux-pm"></span><h2>Physical Machine<a class="headerlink" href="#physical-machine" title="Link to this heading">#</a></h2>
<p>It is assumed that you have a physisical machine with NVMe storage available,
and that you can utilize it destructively. That is, that any data can and will
be lost when using the NVMe devices for testing.</p>
<p>Qemu is utilized extensively during testing to verify NVMe functionality of
NVM, ZNS, KV, FDP, etc. that is NVMe features not readiliy available in HW
is emulated via qemu. Thus, a physical machine is attractive reduce build and
runtime.</p>
<p>It is of course possible to do nested-virtualization, however, it is often
impractical as I/O get orders of magnitudes slower which less than ideal during
build.</p>
<p>Most machines will do for common development and testing, throughout a machine
with the following traits are used:</p>
<ul class="simple">
<li><p>An x86 64-bit CPU</p></li>
<li><p>At least 8GB of memory</p></li>
<li><p>A SATA SSD, 100GB will suffice, used for the</p>
<ul>
<li><p>Operating system</p></li>
<li><p>User data (<code class="docutils literal notranslate"><span class="pre">$HOME</span></code>), repositories, workdirs, etc.</p></li>
</ul>
</li>
<li><p>One or more NVMe SSDs</p>
<ul>
<li><p>Utilized for testing</p></li>
</ul>
</li>
</ul>
<p>This physical machine will be referred to as <code class="docutils literal notranslate"><span class="pre">box01</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Since, the devices utilized for testing a primarily NVMe devices, then it is
convenient to have the operating system and user-data installed on a
separate non-NVMe device, quite simply since SATA pops up as <code class="docutils literal notranslate"><span class="pre">/dev/sd*</span></code>
and NVMe as <code class="docutils literal notranslate"><span class="pre">/dev/nvme*</span></code> / <code class="docutils literal notranslate"><span class="pre">/dev/ng*</span></code>. It avoids one accidentally wiping
the OS device when the devices are entirely separate.</p>
</div>
</section>
<section id="operating-system">
<span id="sec-tutorials-devs-linux-os"></span><h2>Operating System<a class="headerlink" href="#operating-system" title="Link to this heading">#</a></h2>
<p>Here, the latest <strong>stable</strong> Debian Linux, currently <strong>bookworm</strong> is used
throughout.</p>
<ul class="simple">
<li><p>Install it</p>
<ul>
<li><p>Un-select desktop environment</p></li>
<li><p>Select OpenSSH</p></li>
</ul>
</li>
<li><p>Add user <code class="docutils literal notranslate"><span class="pre">odus</span></code> with password as you see fit</p></li>
<li><p>Partition using the entire device</p></li>
<li><p>Setup networking</p></li>
</ul>
<p>And make sure it is accessible from your “main” development machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh-copy-id<span class="w"> </span>odus@box01
</pre></div>
</div>
<p>Log into the machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>odus@box01
</pre></div>
</div>
<p>And then install a couple of things:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Switch to root</span>
su<span class="w"> </span>-
apt-get<span class="w"> </span>-qy<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>-qy<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>htop<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>screen<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>pipx<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sudo<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>vim

<span class="c1"># Make sure that cli-tools installed with pipx are available</span>
pipx<span class="w"> </span>ensurepath

<span class="c1"># Add odus to sudoers (required to do various things as non-root)</span>
usermod<span class="w"> </span>-aG<span class="w"> </span>sudo<span class="w"> </span>odus

<span class="c1"># Add odus to kvm (required to run qemu as non-root)</span>
usermod<span class="w"> </span>-aG<span class="w"> </span>kvm<span class="w"> </span>odus

<span class="c1"># switch back out of root</span>
<span class="nb">exit</span>

<span class="c1"># log out of odus</span>
<span class="nb">exit</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Log out and back in again, to refresh credentials</p>
</div>
<p>Additionally, in order to prepare the system for user-space NVMe drivers, then
vfio/iommu should be enabled along with a couple of user-limit tweaks.</p>
<p>Have a look at the <a class="reference internal" href="../../backends/spdk/index.html#sec-backends-spdk-config"><span class="std std-ref">System Configuration</span></a> section for the details on
this.</p>
</section>
<section id="homedir">
<span id="sec-tutorials-devs-linux-homedir"></span><h2>Homedir<a class="headerlink" href="#homedir" title="Link to this heading">#</a></h2>
<p>Regardless of whether you are using the <strong>box</strong> directly as <code class="docutils literal notranslate"><span class="pre">root</span></code>, or using the
<code class="docutils literal notranslate"><span class="pre">odus</span></code> user, then setup the <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> directory like so:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span><span class="nv">$HOME</span>/<span class="o">{</span>artifacts,git,workdirs,guests,images<span class="o">}</span>
</pre></div>
</div>
<p>The directories are used for the following:</p>
<dl class="simple">
<dt><strong>git</strong></dt><dd><p>A place to store source-repositories, usually these are git repositories for
projects like: xnvme, fio, spdk, linux, and qemu.</p>
</dd>
<dt><strong>workdirs</strong></dt><dd><p>A place for auxilary files, when executing <strong>cijoe</strong> workflows, or doing
misc. experiments and exploration.</p>
</dd>
<dt><strong>artifacts</strong></dt><dd><p>A place to store intermediate artifacts during development. Such as adhoc
Linux kernel <code class="docutils literal notranslate"><span class="pre">.deb</span></code> packages, source-archives etc.</p>
</dd>
<dt><strong>guests</strong></dt><dd><p>A place where boot-images, pid-files, cloud-seeds and other files related to
qemu guests live.</p>
</dd>
<dt><strong>images</strong></dt><dd><p>A place to store VM “boot-images”, such as cloud-init enabled images.</p>
</dd>
</dl>
</section>
<section id="screen-http-server">
<span id="sec-tutorials-devs-linux-screen"></span><h2>Screen + http.server<a class="headerlink" href="#screen-http-server" title="Link to this heading">#</a></h2>
<p>Regardless of whether your <strong>devbox</strong> is physical/virtual/local/remote or some
combination thereof. Then having access to misc. files, and specifically, to
things like <strong>cijoe</strong> output / reports. Is very convenient.</p>
<p>With minimal fuss, then this is achievable with a combinaion of <code class="docutils literal notranslate"><span class="pre">screen</span></code> and
Python:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/workdirs
screen<span class="w"> </span>-d<span class="w"> </span>-m<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>http.server
</pre></div>
</div>
<p>The above starts a webserver, serving the content of the <code class="docutils literal notranslate"><span class="pre">cwd</span></code> where
<code class="docutils literal notranslate"><span class="pre">python3</span></code> is executed and served up over <code class="docutils literal notranslate"><span class="pre">tcp/http</span></code> on port <strong>8000</strong>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-d</span> <span class="pre">-m</span></code> part, creates a screen-session and detaches from it. Thus,
it continues executing even if you disconnect.</p>
<p>You can see the running screen-sessions with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>screen<span class="w"> </span>-list
</pre></div>
</div>
<p>And attach to them using their <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>screen<span class="w"> </span>-r<span class="w"> </span>&lt;name&gt;
</pre></div>
</div>
</section>
<section id="xnvme">
<span id="sec-tutorials-devs-linux-cijoe"></span><h2>xNVMe<a class="headerlink" href="#xnvme" title="Link to this heading">#</a></h2>
<p>Clone, build, and install <strong>xNVMe</strong> and checkout the <code class="docutils literal notranslate"><span class="pre">next</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/OpenMPDK/xNVMe.git<span class="w"> </span>xnvme
<span class="nb">cd</span><span class="w"> </span>xnvme
git<span class="w"> </span>checkout<span class="w"> </span>next
</pre></div>
</div>
<p>Install prerequisites:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./toolbox/pkgs/debian-bookworm.sh
</pre></div>
</div>
<p>Build and install <strong>xNVMe</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/git/xnvme
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<p>Check that it is functional:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>xnvme<span class="w"> </span>enum
</pre></div>
</div>
<p>This should yield output similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xnvme_cli_enumeration:
-<span class="w"> </span><span class="o">{</span>uri:<span class="w"> </span><span class="s1">&#39;/dev/nvme0n1&#39;</span>,<span class="w"> </span>dtype:<span class="w"> </span>0x2,<span class="w"> </span>nsid:<span class="w"> </span>0x1,<span class="w"> </span>csi:<span class="w"> </span>0x0,<span class="w"> </span>subnqn:<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="o">}</span>
</pre></div>
</div>
</section>
<section id="cijoe">
<h2>cijoe<a class="headerlink" href="#cijoe" title="Link to this heading">#</a></h2>
<p>Setup by running the following in the root of the <strong>xNVMe</strong> repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/git/xnvme
make<span class="w"> </span>cijoe
</pre></div>
</div>
<p>This will install <strong>cijoe</strong> along with a couple of <strong>cijoe-packages</strong> for
Linux, qemu, and fio. After installation, then a configuation file is added at
<code class="docutils literal notranslate"><span class="pre">~/.config/cijoe/cijoe-config.toml</span></code>. You need to adjust this to match your
system, look specifically for these entries:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>qemu<span class="o">]</span>
<span class="nv">img_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;qemu-img&quot;</span>
<span class="nv">default_guest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;bookworm_arm64&quot;</span>

<span class="o">[</span>qemu.systems.aarch64<span class="o">]</span>
<span class="c1"># bin = &quot;{{ local.env.HOME }}/opt/qemu/bin/qemu-system-aarch64&quot;</span>
<span class="nv">bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/opt/qemu/bin/qemu-system-aarch64&quot;</span>

<span class="o">[</span>xnvme.repository<span class="o">]</span>
<span class="nv">upstream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/OpenMPDK/xNVMe.git&quot;</span>
<span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;{{ local.env.HOME }}/git/xnvme&quot;</span>

<span class="c1"># This is utilized by repository syncing during development.</span>
<span class="o">[</span>xnvme.repository.sync<span class="o">]</span>
<span class="nv">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wip&quot;</span>
<span class="nv">remote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;guest&quot;</span>
<span class="nv">remote_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/root/git/xnvme&quot;</span>
</pre></div>
</div>
<p>In general, ensure paths to repositories, binaries, etc. match your local system
and the remote system you are using.</p>
<p>Then logout and back in to reload the environment, the addition of <code class="docutils literal notranslate"><span class="pre">pipx</span></code> and
the <code class="docutils literal notranslate"><span class="pre">cijoe</span></code> into <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.</p>
<p>Do a trial-run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workdir</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>~/workdirs/cijoe
<span class="nb">cd</span><span class="w"> </span>~/workdirs/cijoe

<span class="c1"># Create a default configuration and workflow</span>
cijoe<span class="w"> </span>--example<span class="w"> </span>core
</pre></div>
</div>
<p>In case everything is fine, then it will execute silently.</p>
<p>You can increase the information-level with <code class="docutils literal notranslate"><span class="pre">-l</span></code>
argument, the more times you provide the higher the level.
Try running it with two, that is debug-level:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cijoe<span class="w"> </span>-ll
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">cwd</span></code> then a <code class="docutils literal notranslate"><span class="pre">cijoe-output</span></code> is produced, this
directory holds all information about what was executed.
Have a look at the generated report at
<code class="docutils literal notranslate"><span class="pre">cijoe-output/report.html</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you see failures, then inspect the <code class="docutils literal notranslate"><span class="pre">RUNLOG</span></code> in the report, this
usually tells you exactly what went wrong.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is not installed system-wide by running <code class="docutils literal notranslate"><span class="pre">which</span>
<span class="pre">pytest</span></code>. In case it says <code class="docutils literal notranslate"><span class="pre">/usr/bin/pytest</span></code>, then it is not using the
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> provided with the <strong>CIJOE</strong> module. Thus, uninstall it using
<code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">remove</span> <span class="pre">python3-pytest</span></code>.</p>
</div>
<section id="artifacts">
<h3>Artifacts<a class="headerlink" href="#artifacts" title="Link to this heading">#</a></h3>
<p>Produce a set of <strong>artifacts</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/git/xnvme
make<span class="w"> </span>clobber<span class="w"> </span>gen-artifacts

<span class="c1"># Keep them handy if need be</span>
cp<span class="w"> </span>-r<span class="w"> </span>/tmp/artifacts<span class="w"> </span>~/artifacts/xnvme
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clobber</span></code> removes any unstaged changes and removes subprojects.
This is done to ensure an entirely “clean” repository. Thus, make sure that
you have commit your changes.
The <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clobber</span></code> is required for <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">gen-artifacts</span></code>, as it will
otherwise include side-effects from previous builds.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The artifacts produces by <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">gen-artifacts</span></code> are output to
<code class="docutils literal notranslate"><span class="pre">/tmp/artifacts</span></code>. There are <strong>cijoe</strong> workflows, expecting to be available
at that location, specifically the <strong>provision</strong> workflow.</p>
</div>
</section>
</section>
<section id="linux-kernel">
<span id="sec-tutorials-devs-linux-customkernel"></span><h2>Linux Kernel<a class="headerlink" href="#linux-kernel" title="Link to this heading">#</a></h2>
<p>Install prerequisites:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Essentials for building the kernel</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>-qy<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bc<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bison<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>build-essential<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>debhelper<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>flex<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libelf-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libssl-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>pahole<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>rsync

<span class="c1"># A couple of extra libraries and tools</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>-qy<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libncurses-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>linux-cpupower<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3-cpuinfo
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">libnurses-dev</span></code> is needed for <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">menuconfig</span></code>. <code class="docutils literal notranslate"><span class="pre">linux-cpupower</span></code>
provides a cli-tool <code class="docutils literal notranslate"><span class="pre">cpupower</span></code> that let’s you control the Linux CPU
governor, useful for performance evaluation.</p>
</div>
<p>Then run the <strong>cijoe</strong> workflow, compiling a custom kernel as a <code class="docutils literal notranslate"><span class="pre">.deb</span></code>
package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workdir for the workflow</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>~/workdirs/linux
<span class="nb">cd</span><span class="w"> </span>~/workdirs/linux

<span class="c1"># Grab the cijoe-example for linux</span>
cijoe<span class="w"> </span>--example<span class="w"> </span>linux

<span class="c1"># Run it with logging (-l)</span>
cijoe<span class="w"> </span>-l
</pre></div>
</div>
<p>Then re-run the command above. It should now succeed, after which you can
collect the artifacts of interest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>-r<span class="w"> </span>cijoe-output/artifacts/linux<span class="w"> </span>~/artifacts/
</pre></div>
</div>
<p>You can install them by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>~/artifacts/linux/*.deb
</pre></div>
</div>
</section>
<section id="qemu">
<span id="sec-tutorials-devs-linux-qemu"></span><h2>Qemu<a class="headerlink" href="#qemu" title="Link to this heading">#</a></h2>
<p>Install prerequisites:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Packages for building qemu</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>-qy<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>meson<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libattr1-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libcap-ng-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libglib2.0-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libpixman-1-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>libslirp-dev<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>pkg-config

<span class="c1"># Packages for cloud-init</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>-qy<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>cloud-image-utils
</pre></div>
</div>
<p>Checkout qemu:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/OpenMPDK/qemu<span class="w"> </span>--recursive
<span class="nb">cd</span><span class="w"> </span>qemu
git<span class="w"> </span>checkout<span class="w"> </span><span class="k">for</span>-xnvme
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive
</pre></div>
</div>
<p>Create a work-directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/workdirs/qemu
<span class="nb">cd</span><span class="w"> </span>~/workdirs/qemu
</pre></div>
</div>
<p>Run the <strong>cijoe</strong> qemu workflow:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Grab the config and workflow example for qemu</span>
cijoe<span class="w"> </span>--example<span class="w"> </span>qemu

<span class="c1"># Run it with log-level debug (-l)</span>
cijoe<span class="w"> </span>-l
</pre></div>
</div>
<p>With the packages installed, go back and run the <strong>cijoe</strong> workflow. Have a look
at the report, it describes what it does, that is, build and install qemu, spin
up a vm using a cloud-init-enabled Debian image, ssh into it.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In case you get errors such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Could</span> <span class="ow">not</span> <span class="n">access</span> <span class="n">KVM</span> <span class="n">kernel</span> <span class="n">module</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
<span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">x86_64</span><span class="p">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">initialize</span> <span class="n">kvm</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
</pre></div>
</div>
<p>Then this is usually a symptom of virtualization being
disabled in the BIOS of the physical machine. Have a look
at <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> it might proide messages supporting this.</p>
</div>
</section>
<section id="setup-qemu-guest-virtual-machine-for-testing">
<h2>Setup qemu-guest / virtual machine for testing<a class="headerlink" href="#setup-qemu-guest-virtual-machine-for-testing" title="Link to this heading">#</a></h2>
<p>Now that you have qemu built and installed. You can use it to emulate NVMe
devices in the guest for testing. The <strong>xNVMe</strong> <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> has a bunch of
helper-targets to do this. That is, spinning up the guest, synchronizing your
<strong>xNVMe</strong> git repository changes into the qemu-guest, building, installing, and
running tests.</p>
<section id="test-linux">
<h3>Test Linux<a class="headerlink" href="#test-linux" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a cijoe-config for a qemu-guest with Debian Bullseye</span>
cp<span class="w"> </span>cijoe/configs/debian-bullseye.toml<span class="w"> </span>~/.config/cijoe/cijoe-config.toml

<span class="c1"># Provision the machine</span>
make<span class="w"> </span>cijoe-guest-setup-xnvme-using-git

<span class="c1"># Run the test</span>
make<span class="w"> </span>cijoe-do-test-linux
</pre></div>
</div>
</section>
<section id="generate-documentation-in-linux">
<h3>Generate documentation in Linux<a class="headerlink" href="#generate-documentation-in-linux" title="Link to this heading">#</a></h3>
<p>You can reuse qemu-guest created in the previous section to generate the
documentation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>cijoe-do-docgen
</pre></div>
</div>
</section>
<section id="test-freebsd">
<h3>Test FreeBSD<a class="headerlink" href="#test-freebsd" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a cijoe-config for a qemu-guest with FreeBSD</span>
cp<span class="w"> </span>cijoe/configs/debian-bullseye.toml<span class="w"> </span>~/.config/cijoe/cijoe-config.toml

<span class="c1"># Provision the machine</span>
make<span class="w"> </span>cijoe-guest-setup-xnvme-using-git

<span class="c1"># Run the test</span>
make<span class="w"> </span>cijoe-do-test-freebsd
</pre></div>
</div>
</section>
</section>
<section id="reproduce-github-actions-locally">
<h2>Reproduce GitHUB Actions locally<a class="headerlink" href="#reproduce-github-actions-locally" title="Link to this heading">#</a></h2>
<p>The <strong>cijoe</strong> workflows and configurations in this directory are used in the
xNVMe GitHUB actions. You can reproduce what is running on GitHUB by adjusting
the config-files, and provide the artifacts from the GitHUB action:</p>
<ul class="simple">
<li><p>xnvme-py-sdist.tar.gz</p></li>
<li><p>xnvme-src.tar.gz</p></li>
</ul>
<p>Then, place the artifacts in <code class="docutils literal notranslate"><span class="pre">/tmp/artifacts</span></code>.</p>
<section id="id1">
<h3>Test Linux<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Then you should be able to run the following to test <strong>Linux</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Provision and test on Debian Bullseye</span>
cp<span class="w"> </span>cijoe/configs/debian-bullseye.toml<span class="w"> </span>~/.config/cijoe/cijoe-config.toml
<span class="c1"># Edit the cijoe-config, then run</span>

make<span class="w"> </span>cijoe-guest-setup-using-tgz
make<span class="w"> </span>cijoe-do-test-linux
</pre></div>
</div>
</section>
<section id="id2">
<h3>Test FreeBSD<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>Then you should be able to run the following to test xNVMe on <strong>FreeBSD</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Provision and test on FreeBSD 13</span>
cp<span class="w"> </span>cijoe/configs/freebsd-13.toml<span class="w"> </span>~/.config/cijoe/cijoe-config.toml

make<span class="w"> </span>cijoe-guest-setup-using-tgz
make<span class="w"> </span>cijoe-do-test-freebsd
</pre></div>
</div>
</section>
<section id="generate-docs">
<h3>Generate docs<a class="headerlink" href="#generate-docs" title="Link to this heading">#</a></h3>
<p>And generate documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate documentation (provisions qemu-guest and generates the docs)</span>
make<span class="w"> </span>cijoe-do-docgen
</pre></div>
</div>
<p>In case you are setting up the test-target using other tools, or just want to
run pytest directly, then the following two sections describe how to do that.</p>
</section>
</section>
<section id="running-pytest-from-the-repository">
<h2>Running pytest from the repository<a class="headerlink" href="#running-pytest-from-the-repository" title="Link to this heading">#</a></h2>
<p>Invoke pytest providing a configuration file and an output directory for
artifacts and captured output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--config<span class="w"> </span>configs/debian-bullseye.toml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>/tmp/somewhere<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>tests
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--config</span></code> is needed to inform pytest about the environment you are
running in such as which devices it can use for testing. The information is
utilized by pytest to, among other things, do parametrization for xNVMe backend
configurations etc.</p>
<section id="provision-a-qemu-guest">
<h3>Provision a qemu-guest<a class="headerlink" href="#provision-a-qemu-guest" title="Link to this heading">#</a></h3>
<p>Setup a virtual machine with <strong>xNVMe</strong> installed, and a bunch of NVMe devices
configured:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cijoe<span class="w"> </span>-c<span class="w"> </span>configs/debian-bullseye.toml<span class="w"> </span>provision.yaml
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It will likely fail with the error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span><span class="p">:</span> <span class="mi">1</span><span class="p">:</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">qemu</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">x86_64</span><span class="p">:</span> <span class="ow">not</span> <span class="n">found</span>
</pre></div>
</div>
<p>This is because the default configuration is for running on Github. Thus,
adjust the file <code class="docutils literal notranslate"><span class="pre">configs/debian-bullseye.toml</span></code> such that qemu is
pointing to <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>.</p>
</div>
</section>
<section id="create-boot-images">
<h3>Create boot-images<a class="headerlink" href="#create-boot-images" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">debian-bullseye-amd64.qcow2</span></code> is created by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cijoe<span class="w"> </span>-c<span class="w"> </span>configs/debian-bullseye.toml<span class="w"> </span>workflows/bootimg-debian-bullseye-amd64.yaml
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">freebsd-13.1-ksrc-amd64.qcow2</span></code> is created by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cijoe<span class="w"> </span>-c<span class="w"> </span>configs/freebsd-13.toml<span class="w"> </span>workflows/bootimg-freebsd-13-amd64.yaml
</pre></div>
</div>
</section>
</section>
<section id="remote-dev">
<h2>Remote dev<a class="headerlink" href="#remote-dev" title="Link to this heading">#</a></h2>
<p>Assuming your primary device for development is something like a Chromebook/
Macbook, something light-weight and great for reading mail… but now you want
to fire up your editor and do some development.</p>
<p>Or, your primary system is simply separate from the dev-box for a myriad of
reasons. Then, have a look at the existing <strong>cijoe</strong> configuration files in
<code class="docutils literal notranslate"><span class="pre">cijoe/configs/*.toml</span></code>, copy one that mathes your intended system, e.g.
use the configuration file for the qemu-guest as a starting point for a
configuration file for another physical machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>configs/debian-bullseye.toml<span class="w"> </span>~/.config/cijoe/cijoe-config.toml
</pre></div>
</div>
<p>Open up <code class="docutils literal notranslate"><span class="pre">~/.config/cijoe/cijoe-config.toml</span></code> and adjust it to your physical
machine. That is, change the ssh-login information, change the list of devices,
paths to binaries etc. Once you have done that, then go ahead and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Synchronize your local git with the repos on the remote physical machine</span>
make<span class="w"> </span>cijoe-sync-git

<span class="c1"># Build and install xNVMe on the remote end</span>
make<span class="w"> </span>cijoe-setup-xnvme-using-git
</pre></div>
</div>
<p>You can do any of the <strong>cijoe</strong> things like the above.</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-machine">Physical Machine</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operating-system">Operating System</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#homedir">Homedir</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#screen-http-server">Screen + http.server</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#xnvme">xNVMe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cijoe">cijoe</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#artifacts">Artifacts</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linux-kernel">Linux Kernel</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#qemu">Qemu</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-qemu-guest-virtual-machine-for-testing">Setup qemu-guest / virtual machine for testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-linux">Test Linux</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-documentation-in-linux">Generate documentation in Linux</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-freebsd">Test FreeBSD</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reproduce-github-actions-locally">Reproduce GitHUB Actions locally</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Test Linux</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Test FreeBSD</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-docs">Generate docs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-pytest-from-the-repository">Running pytest from the repository</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#provision-a-qemu-guest">Provision a qemu-guest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-boot-images">Create boot-images</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remote-dev">Remote dev</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, xNVMe.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>